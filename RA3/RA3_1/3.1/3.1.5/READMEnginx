Pr√°ctica 5: Despliegue de Servidor Nginx Seguro con ModSecurity y PHP-FPM

Este repositorio contiene la configuraci√≥n de un servidor web Nginx altamente asegurado, desplegado mediante contenedores Docker. La soluci√≥n integra un cortafuegos de aplicaciones web (WAF) y un motor de procesamiento PHP.
üõ†Ô∏è Componentes del Stack

    Imagen Base: owasp/modsecurity-crs:nginx (Nginx + ModSecurity + Reglas OWASP).

    Procesador PHP: PHP-FPM 8.2 configurado sobre el puerto TCP 9000.

    Seguridad WAF: ModSecurity v3 con el Core Rule Set (CRS) de OWASP activo en modo bloqueo (On).

    Cifrado: Certificados SSL/TLS (autofirmados) con redirecci√≥n forzosa desde HTTP.

üîí Medidas de Seguridad Implementadas

    Hardening de Cabeceras:

        Strict-Transport-Security (HSTS): Obliga al uso de HTTPS durante 1 a√±o.

        Content-Security-Policy (CSP): Restringe la ejecuci√≥n de scripts a fuentes del propio dominio ('self').

    Control de Acceso: Directorio /protegido restringido mediante autenticaci√≥n b√°sica (Usuario: edu / Pass: edu123).

    Protecci√≥n contra Inyecciones: Bloqueo activo de ataques XSS, SQLi y Command Injection mediante el motor ModSecurity.

üöÄ Despliegue Rapido

Para poner en marcha el servidor, ejecuta:
Bash

sudo docker pull educiber/pps:pr5
sudo docker run -d --name servidor_nginx -p 80:80 -p 443:443 educiber/pps:pr5

üß™ Pruebas de Verificaci√≥n

    Acceso PHP: https://localhost/index.php

    Prueba de Seguridad (WAF): curl -I -k "https://localhost/index.php?exec=/bin/bash" (El servidor cortar√° la conexi√≥n o devolver√° un 403 al detectar el intento de inyecci√≥n de comandos).
